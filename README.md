# Betonator-Presale-smart-contract
Token emission on base of MintableToken

## Использование смарт-контракта BetonatorCrowdSale
### (на примере работы через Mist)

1.	Для работы и приема средств в основном блокчейне контракт нужно выгрузить в основой Ethereum-блокчейн

2.	В контракте определены несколько вспомогательных классов-контрактов. Вам нужно запустить BetonatorCrowdsale

3.	В качестве параметра нужно передать значение rate (курс). 
В связи с тем, что смарт-контракты не поддерживают работы с дробными числами rate должно быть целым числом от 1 до 999. Rate это "курс" токена BETC. Фактически он означает "сколько эфира нужно заплатить за 1000 BETC". 
Рассчитать его можно по следующей формуле:
rate = 1000 * (курс BETC в USD) / (курс ETH в USD). 
Например, если сегодня курс эфира 450 долларов, а мы хотим продавать BETC по 10 долларов, то rate = 1000 * 10 /450 = 22,22... Т.е. примерно 22. 


4.	После загрузки контракта в сеть у него появится адрес https://gyazo.com/6d2460cbb904234286e601cb73fd9016
 Именно на этот адрес инвесторам предстоит отправлять вам эфир. 

5.	После отправки контракта в сеть в его параметрах появится адрес токена BETC https://gyazo.com/939afb017d075d51334baa7efc3b28ec
Все кто хочет, чтобы информация об этом токене (например, баланс на счету) отображался в Mist должны, добавить этот адрес в разделе 

Contracts -> Custom Tokens -> Watch Token https://gyazo.com/df2c40e5f5fba2e17cfca9881194f1d0
 Интерфейс добавления будет выглядеть так: https://gyazo.com/30898b3bf45703018d29200172b6ecd1

6.	 В интерфейсе контракта будут доступны его текущие параметры

•	Rate - курс для расчета стоимости токена
•	EndTime - дата и время завершения crowdSale. В данной модификации контракта не будет изменяться. 
•	WeiRaised - сколько всего эфира отправили инвесторы на контракт. Сумма отображается в Wei. Wei это частичка эфира, такая что один эфир это десять в восемнадцатой степени вей. Нулей непривычно много, но это специфика смарт-контрактов, которые не работают с дробными числами. 
•	TokensMinted - сколько всего выпущено токенов. Количество тоже умножено на 100, чтобы корректно отображать дробные доли токенов. 
•	StartTime - время начала продажи токенов. Совпадает со временем загрузки контракта в сеть
•	isPaused - переменная отображающая была ли приостановлена продажа токенов. 
•	MinimumSupply - минимальное количество токенов, которое может быть продано за одну транзакцию
•	SaleStatus – состояние контракта продажа токенов (Running или Paused). 
•	Token - адрес токенов BETC необходимый для отслеживания балансов инвесторов

7.	Также там можно будет вызвать ряд функций https://gyazo.com/43f54ae17162100054b169119ad98b32

•	SetRate - Установить rate
•	BuyTokens - купить токены. При отправке эфира на адрес контракта вызывается автоматически
•	IssueTokens – данной функцией Владелец контракта может перечислить любое количество токенов на переданный в качестве параметра адрес
•	PauseCrowdSale - приостановить продажу токенов
•	StartCrowdSale - возобновить продаж в CrowdSale
•	TransferOwnership - изначально Владельцем контракта становится тот, кто загрузил контракт в сеть. Только с этого же кошелька возможен вызов функций SetRate, StartCrowdSale, PauseCrowdSale, TransferOwnership, IssueTokens. Но Владелец может передать свои права на другой адрес при помощи этой функции. 

8.	Под интерфейсом контракта можно отслеживать события генерируемые контрактом. Для этого нужно поставить галочку в поле Watch contract events https://gyazo.com/42f231d9aa5376d14fdab12a079c9fa6
В событиях будет выводиться кто и когда совершил перевод на адрес контракта, сумма эфира (в wei), сколько он получил токенов (тоже надо поделить на десять в восемнадцатой) и сколько всего токенов было выпущено к этому моменту. 
Также добавлены вспомогательные поля integer_value (это собранная сумма эфира округленная до целого числа вниз). А также поле integer_amount – округленная до целого числа вниз сумма выпущенных токенов). 
Также в событиях будет выводится информация о переданных Владельцем токенах посредством функции IssueTokens.


9.	Все поступающие на счет контракта средства автоматически переправляются на кошелек Владельца контракта.




